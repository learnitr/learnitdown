<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Track events, the submit or the quit buttons — trackEvents • learnitdown</title><!-- favicons --><link rel="icon" type="image/png" sizes="48x48" href="../favicon-48x48.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/spacelab/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Track events, the submit or the quit buttons — trackEvents"><meta property="og:description" content="These functions provide the required code to be inserted in the server part
of a Shiny application to track events (start, stop, inputs, outputs, errors,
result or quit), to check the answer when the user clicks on the submit
button and to cleanly close the application when the user clicks on the quit
button."><meta property="og:image" content="https://learnitr.github.io/learnitdown/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">learnitdown</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.8.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/learnitdown.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/learnitr/learnitdown/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Track events, the submit or the quit buttons</h1>
    <small class="dont-index">Source: <a href="https://github.com/learnitr/learnitdown/blob/main/R/learnitdown_shiny.R" class="external-link"><code>R/learnitdown_shiny.R</code></a></small>
    <div class="hidden name"><code>trackEvents.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>These functions provide the required code to be inserted in the server part
of a Shiny application to track events (start, stop, inputs, outputs, errors,
result or quit), to check the answer when the user clicks on the submit
button and to cleanly close the application when the user clicks on the quit
button.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">trackEvents</span><span class="op">(</span></span>
<span>  <span class="va">session</span>,</span>
<span>  <span class="va">input</span>,</span>
<span>  <span class="va">output</span>,</span>
<span>  sign_in.fun <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  url <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"MONGO_URL"</span><span class="op">)</span>,</span>
<span>  url.server <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"MONGO_URL_SERVER"</span><span class="op">)</span>,</span>
<span>  db <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"MONGO_BASE"</span><span class="op">)</span>,</span>
<span>  user <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"MONGO_USER"</span><span class="op">)</span>,</span>
<span>  password <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"MONGO_PASSWORD"</span><span class="op">)</span>,</span>
<span>  version <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"learnitdown.shiny.version"</span><span class="op">)</span>,</span>
<span>  path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"LEARNITDOWN_LOCAL_STORAGE"</span>, <span class="st">"shiny_logs"</span><span class="op">)</span>,</span>
<span>  log.errors <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  log.outputs <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  drop.dir <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  config <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  debug <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"LEARNITDOWN_DEBUG"</span>, <span class="fl">0</span><span class="op">)</span> <span class="op">!=</span> <span class="fl">0</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">trackSubmit</span><span class="op">(</span></span>
<span>  <span class="va">session</span>,</span>
<span>  <span class="va">input</span>,</span>
<span>  <span class="va">output</span>,</span>
<span>  solution <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  max_score <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  comment <span class="op">=</span> <span class="st">""</span>,</span>
<span>  message.success <span class="op">=</span> <span class="st">"Correct"</span>,</span>
<span>  message.error <span class="op">=</span> <span class="st">"Incorrect"</span>,</span>
<span>  score.txt <span class="op">=</span> <span class="st">"Score"</span>,</span>
<span>  check.solution <span class="op">=</span> <span class="va">check_shiny_solution</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">trackQuit</span><span class="op">(</span><span class="va">session</span>, <span class="va">input</span>, <span class="va">output</span>, delay <span class="op">=</span> <span class="fl">60</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">check_shiny_solution</span><span class="op">(</span><span class="va">answer</span>, <span class="va">solution</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-session">session<a class="anchor" aria-label="anchor" href="#arg-session"></a></dt>
<dd><p>The current Shiny <code>session</code>.</p></dd>


<dt id="arg-input">input<a class="anchor" aria-label="anchor" href="#arg-input"></a></dt>
<dd><p>The Shiny <code>input</code> object.</p></dd>


<dt id="arg-output">output<a class="anchor" aria-label="anchor" href="#arg-output"></a></dt>
<dd><p>The Shiny <code>output</code> object.</p></dd>


<dt id="arg-sign-in-fun">sign_in.fun<a class="anchor" aria-label="anchor" href="#arg-sign-in-fun"></a></dt>
<dd><p>The function that can get user info from the
<code><a href="config.html">sign_in()</a></code>, or <code>NULL</code> by default to disable using local user data.</p></dd>


<dt id="arg-url">url<a class="anchor" aria-label="anchor" href="#arg-url"></a></dt>
<dd><p>The URL to reach the MongoDB database. By default, it is read from
the <code>MONGO_URL</code> environment variable.</p></dd>


<dt id="arg-url-server">url.server<a class="anchor" aria-label="anchor" href="#arg-url-server"></a></dt>
<dd><p>The URL to reach the MongoDB database. By default, it is
read from the <code>MONGO_URL_SERVER</code> environment variable.</p></dd>


<dt id="arg-db">db<a class="anchor" aria-label="anchor" href="#arg-db"></a></dt>
<dd><p>The database to populate in the MongoDB database. By default, it is
read from the <code>MONGO_BASE</code> environment variable.</p></dd>


<dt id="arg-user">user<a class="anchor" aria-label="anchor" href="#arg-user"></a></dt>
<dd><p>The user login to the MongoDB database. By default, it is
read from the <code>MONGO_USER</code> environment variable.</p></dd>


<dt id="arg-password">password<a class="anchor" aria-label="anchor" href="#arg-password"></a></dt>
<dd><p>The password to access the MongoDB database. By default, it
is read from the <code>MONGO_PASSWORD</code> environment variable.</p></dd>


<dt id="arg-version">version<a class="anchor" aria-label="anchor" href="#arg-version"></a></dt>
<dd><p>The version of the current Shiny application. By default, it
is the <code>learnitdown.shiny.version</code> option, as set by
<code><a href="learnitdownShiny.html">learnitdownShinyVersion()</a></code>.</p></dd>


<dt id="arg-path">path<a class="anchor" aria-label="anchor" href="#arg-path"></a></dt>
<dd><p>The path where the temporary <code>shinylogs</code> log files are stored. By
default, it is set to the <code>LEARNITDOWN_LOCAL_STORAGE</code> environment variable,
or to <code>shiny_logs</code> subdirectory of the application if not defined. If that
directory is not writable, a temporary directory is used instead.</p></dd>


<dt id="arg-log-errors">log.errors<a class="anchor" aria-label="anchor" href="#arg-log-errors"></a></dt>
<dd><p>Do we log error events (yes by default)?</p></dd>


<dt id="arg-log-outputs">log.outputs<a class="anchor" aria-label="anchor" href="#arg-log-outputs"></a></dt>
<dd><p>Do we log output events (no by default)?</p></dd>


<dt id="arg-drop-dir">drop.dir<a class="anchor" aria-label="anchor" href="#arg-drop-dir"></a></dt>
<dd><p>Do we erase the directory indicated by <code>path =</code> if it is
empty at the end of the process (yes by default).</p></dd>


<dt id="arg-config">config<a class="anchor" aria-label="anchor" href="#arg-config"></a></dt>
<dd><p>The result of the call to <code><a href="config.html">config()</a></code>, if done.</p></dd>


<dt id="arg-debug">debug<a class="anchor" aria-label="anchor" href="#arg-debug"></a></dt>
<dd><p>Do we debug recording of events using extra messages? By
default, it is the value of the environment variable <code>LEARNITDOWN_DEBUG</code>, and
debugging is activated when that value is different to <code>0</code>.</p></dd>


<dt id="arg-solution">solution<a class="anchor" aria-label="anchor" href="#arg-solution"></a></dt>
<dd><p>The correct solution as a named list. Names are the
application inputs to check and their values are the correct values. The
current state of these inputs will be compared against the solution, and the
<code>message.success</code> or <code>message.error</code> is displayed accordingly. Also a result
event is triggered with the <code>correct</code> field set to <code>TRUE</code> or <code>FALSE</code>
accordingly. If <code>solution = NULL</code>, then the answer is considered to be always
correct (use this if you just want to indicate that the user's answer is
recorded in the database). For numeric values, use `c(min = x, max = y) to
check if values are within a range.</p></dd>


<dt id="arg-max-score">max_score<a class="anchor" aria-label="anchor" href="#arg-max-score"></a></dt>
<dd><p>The highest score value that could be attributed if the
exercise is correctly done. By default, it is <code>NULL</code> meaning that the higher
score would be equal to the number of items to check in <code>solution</code>.</p></dd>


<dt id="arg-comment">comment<a class="anchor" aria-label="anchor" href="#arg-comment"></a></dt>
<dd><p>A string with a comment to append to the value of the result
event.</p></dd>


<dt id="arg-message-success">message.success<a class="anchor" aria-label="anchor" href="#arg-message-success"></a></dt>
<dd><p>The message to display is the answer is correct
("Correct" by default).</p></dd>


<dt id="arg-message-error">message.error<a class="anchor" aria-label="anchor" href="#arg-message-error"></a></dt>
<dd><p>The message to display if the answer is wrong
("Incorrect" by default).</p></dd>


<dt id="arg-score-txt">score.txt<a class="anchor" aria-label="anchor" href="#arg-score-txt"></a></dt>
<dd><p>The word to use for "score" ("Score" by default).</p></dd>


<dt id="arg-check-solution">check.solution<a class="anchor" aria-label="anchor" href="#arg-check-solution"></a></dt>
<dd><p>The function to use to check if solution provided by
a Shiny application is correct or not. By default, it is
<code>check_shiny_solution()</code>.</p></dd>


<dt id="arg-delay">delay<a class="anchor" aria-label="anchor" href="#arg-delay"></a></dt>
<dd><p>The time to wait before we close the Shiny application in sec
(60 sec by default). If <code>delay = -1</code>, the application is <strong>not</strong> closed, only
the session is closed when the user clicks on the quit button.</p></dd>


<dt id="arg-answer">answer<a class="anchor" aria-label="anchor" href="#arg-answer"></a></dt>
<dd><p>A named list of the answer data to check against solution. This
object is provided by <code>trackSubmit()</code>.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>The code to be inserted in the server part of the learnitdown Shiny
application in order to properly identify the user and record the events.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="learnitdownShiny.html">learnitdownShinyVersion()</a></code>, <code><a href="config.html">sign_in()</a></code></p></div>
    </div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by <a href="https://phgrosjean.sciviews.org" class="external-link">Philippe Grosjean</a>.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

      </footer></div>






  </body></html>

