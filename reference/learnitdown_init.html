<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Initialize learnitdown features in an R Markdown document — learnitdown_init • learnitdown</title><!-- favicons --><link rel="icon" type="image/png" sizes="48x48" href="../favicon-48x48.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/spacelab/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Initialize learnitdown features in an R Markdown document — learnitdown_init"><meta property="og:description" content="This function must be called in a script run by before_chapter_script entry
in _bookdown.yml to create required style.css and header.html files."><meta property="og:image" content="https://learnitr.github.io/learnitdown/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">learnitdown</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.8.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/learnitdown.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/learnitr/learnitdown/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Initialize learnitdown features in an R Markdown document</h1>
    <small class="dont-index">Source: <a href="https://github.com/learnitr/learnitdown/blob/main/R/learnitdown_init.R" class="external-link"><code>R/learnitdown_init.R</code></a></small>
    <div class="hidden name"><code>learnitdown_init.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function must be called in a script run by <code>before_chapter_script</code> entry
in <code>_bookdown.yml</code> to create required <code>style.css</code> and <code>header.html</code> files.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">learnitdown_init</span><span class="op">(</span></span>
<span>  shiny <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  h5p <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  use.query <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  iframe.links <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  details.css <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  baseurl <span class="op">=</span> <span class="st">"https://example.org"</span>,</span>
<span>  institutions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"institution1"</span>, <span class="st">"institution2"</span><span class="op">)</span>,</span>
<span>  courses <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"course1"</span>, <span class="st">"course2"</span>, <span class="st">"course3"</span><span class="op">)</span>,</span>
<span>  style <span class="op">=</span> <span class="st">"style.css"</span>,</span>
<span>  style0 <span class="op">=</span> <span class="st">"style0.css"</span>,</span>
<span>  header <span class="op">=</span> <span class="st">"header.html"</span>,</span>
<span>  header0 <span class="op">=</span> <span class="st">"header0.html"</span>,</span>
<span>  hide.code.msg <span class="op">=</span> <span class="st">"See code"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-shiny">shiny<a class="anchor" aria-label="anchor" href="#arg-shiny"></a></dt>
<dd><p>Do we use Shiny applications and do we want to pass parameters
and or launch the application on a click?</p></dd>


<dt id="arg-h-p">h5p<a class="anchor" aria-label="anchor" href="#arg-h-p"></a></dt>
<dd><p>Do we use H5P served from a Wordpress site in the same domain as
our R Markdown document? The H5P integration plugin, and the H5PxAPIkatchu
Wordpress plugins must be installed in order to serve H5P apps and to record
the H5P events through the xAPI interface.</p></dd>


<dt id="arg-use-query">use.query<a class="anchor" aria-label="anchor" href="#arg-use-query"></a></dt>
<dd><p>Do we collect user/course/institution data through the URL
query string (the part after the question mark in the URL).</p></dd>


<dt id="arg-iframe-links">iframe.links<a class="anchor" aria-label="anchor" href="#arg-iframe-links"></a></dt>
<dd><p>If our document is displayed in an iframe, external link
should better target their parent window. With this option, external links
with no defined target are automatically retargeted when the page loads.</p></dd>


<dt id="arg-details-css">details.css<a class="anchor" aria-label="anchor" href="#arg-details-css"></a></dt>
<dd><p>Do we want to enhance the <code>&lt;details&gt;</code> section with a
summary surrounded by a light gray box in order to better evidence it.</p></dd>


<dt id="arg-baseurl">baseurl<a class="anchor" aria-label="anchor" href="#arg-baseurl"></a></dt>
<dd><p>The URL where the site is server from (for H5P integration),
it is also the base URL for the associated Wordpress server with H5P plugin.
Provide it <strong>without</strong> the trailing /!</p></dd>


<dt id="arg-institutions">institutions<a class="anchor" aria-label="anchor" href="#arg-institutions"></a></dt>
<dd><p>The list of possible institutions that have specific
sections in this document.</p></dd>


<dt id="arg-courses">courses<a class="anchor" aria-label="anchor" href="#arg-courses"></a></dt>
<dd><p>The list of courses with specific sections in this document.</p></dd>


<dt id="arg-style">style<a class="anchor" aria-label="anchor" href="#arg-style"></a></dt>
<dd><p>The path to the 'style.css' file.</p></dd>


<dt id="arg-style-">style0<a class="anchor" aria-label="anchor" href="#arg-style-"></a></dt>
<dd><p>The path to a file with additional content to add to the
'style.css' file.</p></dd>


<dt id="arg-header">header<a class="anchor" aria-label="anchor" href="#arg-header"></a></dt>
<dd><p>The path to the 'header.html' file.</p></dd>


<dt id="arg-header-">header0<a class="anchor" aria-label="anchor" href="#arg-header-"></a></dt>
<dd><p>The path to a file with additional content to add to
'header.html'.</p></dd>


<dt id="arg-hide-code-msg">hide.code.msg<a class="anchor" aria-label="anchor" href="#arg-hide-code-msg"></a></dt>
<dd><p>The message to display for hidden code.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>A list with <code>css</code> and <code>html</code> components with the content that was
added to respective files is returned invisibly for debugging purposes '(the
function is mainly used for its side effect of creating <code>style.css</code> and
<code>header.html</code> files for the bookdown format).</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># This is better placed in a setup R chunk or an R inline expression on its</span></span></span>
<span class="r-in"><span><span class="co"># own line. To see the code injected, use `cat()` at the R prompt:</span></span></span>
<span class="r-in"><span><span class="va">odir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">setwd</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.create</a></span><span class="op">(</span><span class="st">"temp"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">setwd</a></span><span class="op">(</span><span class="st">"temp"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Create fake style0.css and header0.html files to see what happens</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\n/* Content from style0.css */\n"</span>, file <span class="op">=</span> <span class="st">"style0.css"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\n&lt;!-- Content from header0.html --&gt;\n"</span>, file <span class="op">=</span> <span class="st">"header0.html"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Create style.css and header.html files</span></span></span>
<span class="r-in"><span><span class="op">(</span><span class="fu">learnitdown_init</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $style</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "\n.institution1, .institution2 {\n  display: none;\n}\n\n.noinstitution {\n  display: block;\n}\n\n.course1, .course2, .course3 {\n  display: none;\n}\n\n.nocourse {\n  display: block;\n}\n\nsummary {\n  background:  #f5f5f5;\n  border: 1px solid #ccc;\n}\n\n.shiny-img {\n  filter: brightness(80%);\n}\n\n\n/* Content from style0.css */"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $html</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "&lt;script&gt;\nfunction getParameterByName(name, url) {\n  name = name.replace(/[\\[\\]]/g,\"\\\\$&amp;\");\n  // Try to get the value from local storage\n  if (window.localStorage) {\n    return localStorage.getItem(name);\n  } else {\n    return '';\n  }\n}\n\n// Collect parameters and store their values (as passed by Moodle/Wordpress)\nvar login       = getParameterByName('login');\nvar email       = getParameterByName('email');\nvar displayname = getParameterByName('displayname');\nvar firstname   = getParameterByName('firstname');\nvar lastname    = getParameterByName('lastname');\nvar iemail      = getParameterByName('iemail');\nvar iid         = getParameterByName('iid');\nvar ifirstname  = getParameterByName('ifirstname');\nvar ilastname   = getParameterByName('ilastname');\nvar institution = getParameterByName('institution');\nvar icourse     = getParameterByName('icourse');\nvar ictitle     = getParameterByName('ictitle');\nvar iurl        = getParameterByName('iurl');\nvar iref        = getParameterByName('iref');\n\nlet institutions = ['institution1', 'institution2', 'noinstitution'];\nlet courses = ['course1', 'course2', 'course3', 'nocourse'];\n\nfunction toggleDisplay(item, target) {\n  var style = item == target ? 'block' : 'none';\n  var elems = document.getElementsByClassName(item);\n  for (i = 0; i &lt; elems.length; i++) {\n    var elem = elems[i];\n    elem.style.display = style;\n  }\n}\n\nfunction toggleInstitution(name) {\n  // Disable all institutions except that one\n  // Since they are already all hidden, just reenable it and hide noinstitution\n  toggleDisplay('noinstitution', name);\n  toggleDisplay(name, name);\n}\n\nfunction toggleCourse(name) {\n  // Disable all courses except that one\n  // Since they are already all hidden, just reenable it and hide nocourse\n  toggleDisplay('nocourse', name);\n  toggleDisplay(name, name);\n}\n\nfunction processParameters() {\n  // Content related to an institution\n  if (institution !== null) {\n    toggleInstitution(institution);\n  }\n  // Content relative to a course\n  if (icourse !== null) {\n    toggleCourse(icourse);\n  }\n  // Process other parameters too here...\n  // ...\n}\n\n\nfunction hideCode() {\n  //var codes = document.querySelectorAll('pre:not([class])');\n  var codes = document.getElementsByClassName('hidden-code');\n  var code, i, d, s, p;\n  for (i = 0; i &lt; codes.length; i++) {\n    // We want to place the parent div into details instead\n    code = codes[i].parentNode;\n    p = code.parentNode;\n    d = document.createElement('details');\n    s = document.createElement('summary');\n    s.innerText = 'See code';\n    //&lt;details&gt;&lt;summary&gt;hide.code.msg&lt;/summary&gt;&lt;/details&gt;\n    d.appendChild(s);\n    // move the code into &lt;details&gt;\n    p.replaceChild(d, code);\n    d.appendChild(code);\n  }\n}\n\n\nfunction retargetLinks() {\n  // If displayed in an iframe, open external links into parent\n  // Adapted from Yihui Xie blog\n  var links = document.getElementsByTagName('a');\n  for (var i = 0; i &lt; links.length; i++) {\n    if (/^(https?:)?\\/\\//.test(links[i].getAttribute('href')) &amp;&amp;\n      (links[i].target == null || links[i].target == '')) {\n      links[i].target = '_parent';\n    }\n  }\n};\n\nwindow.onload = function() {processParameters(); hideCode(); retargetLinks();};\n\nfunction encodeQueryParam(name, first = false) {\n  var value = localStorage.getItem(name);\n  if (value === null || value == '') return '';\n  var sep = first ? '' : '&amp;';\n  return sep + encodeURIComponent(name) + '=' + encodeURIComponent(value);\n}\n\nfunction encodeQueryString() {\n  // We got data from localStorage. So, if no data, no query string!\n  if (!window.localStorage) return('');\n  query = encodeQueryParam('login', true);\n  query += encodeQueryParam('email') + encodeQueryParam('displayname');\n  query += encodeQueryParam('firstname') + encodeQueryParam('lastname');\n  query += encodeQueryParam('iemail') + encodeQueryParam('iid');\n  query += encodeQueryParam('ifirstname') + encodeQueryParam('ilastname');\n  query += encodeQueryParam('institution');\n  query += encodeQueryParam('icourse') + encodeQueryParam('ictitle');\n  query += encodeQueryParam('iurl') + encodeQueryParam('iref');\n  // Detect if we have the Sepia or Night theme\n  // TODO: refine this because it is *always* detected\n  //if (document.getElementsByClassName('color-theme-1')) {\n  //  if (query == '') {\n  //    query = 'theme=Sepia';\n  //  } else {\n  //    query += '&amp;theme=Sepia';\n  //  }\n  //}\n  //if (document.getElementsByClassName('color-theme-22')) {\n  //  if (query == '') {\n  //    query = 'theme=Night';\n  //  } else {\n  //    query += '&amp;theme=Night';\n  //  }\n  //}\n  return query;\n}\n\n//var params = window.location.toString().split('?')[1];\nvar params = encodeQueryString();\n\nif (params !== undefined &amp;&amp; params != '') {\n  var apps = document.getElementsByClassName('app');\n  for (i = 0; i &lt; apps.length; i++) {\n    var appitem = apps[i];\n    appitem.src = appitem.src + '?' + params;\n  }\n\n  //var h5ps = document.getElementsByClassName('h5p');\n  //for (i = 0; i &lt; h5ps.length; i++) {\n  //  var h5pitem = h5ps[i];\n  //  h5pitem.src = h5pitem.src + '&amp;' + params;\n  //}\n}\n\n// We have to add an authorization key to the header for the Shiny app\n//... but those two trials do not work!\n//async function getApp(src) {\n//  const res = await fetch(src, {\n//    method: 'GET',\n//    headers: {\n//      'Authorization': 'Key &lt;connect_api_key&gt;',\n//    }\n//  });\n//  const blob = await res.blob();\n//  const urlObject = URL.createObjectURL(blob);\n//  //document.querySelector('iframe').setAttribute('src', urlObject)\n//  return urlObject;\n//}\n// or:\n//loadIframe = function(src, token, app) {\n//    let xhr = new XMLHttpRequest();\n//\n//    function handler() {\n//      if (this.readyState === this.DONE) {\n//        if (this.status === 200) {\n//          console.log(this);\n//          //document.querySelector(`#${frameId}`).src = \"data:text/html;charset=utf-8,\" + encodeURIComponent(this.responseText);\n//          //app.src = \"data:text/html;charset=utf-8,\" + encodeURIComponent(this.responseText);\n//          //app.src = URL.createObjectURL(this.response);\n//        } else {\n//          //console.error('not loaded');\n//        }\n//      }\n//    }\n//\n//    xhr.open('GET', src);\n//    xhr.onreadystatechange = handler;\n//    xhr.responseType = 'blob';\n//    xhr.withCredentials = true;\n//    xhr.setRequestHeader('Authorization', 'Key ' + token);\n//    xhr.send();\n//  }\n\nlaunchApp = function(id, src) {\n  // This is now required by Posit Connect for embedding content\n  var address = window.location.toString().split('?')[0];\n  if (src.includes('?')) {\n    // There is already a search string =&gt; append parameters to it\n    src = src + '&amp;' + 'framesource=' + encodeURIComponent(address);\n  } else {\n    // Add a search string\n    src = src + '?' + 'framesource=' + encodeURIComponent(address);\n  }\n  var params = encodeQueryString();\n  if (params !== undefined &amp;&amp; params != '') {\n    src = src + '&amp;' + params;\n  }\n\n  var img = document.getElementById('img' + id);\n  var app = document.getElementById(id);\n\n  //app.src = getApp(src);\n  //loadIframe(src, '&lt;connect_api_key&gt;', app);\n  app.src = src;\n  app.style.display='block';\n  img.style.display='none';\n}\n\nvar H5PIntegration = parent.H5PIntegration;\nvar wpAJAXurl = 'https:\\/\\/example.org\\/wp-admin\\/admin-ajax.php';\nvar debugEnabled = '0';\nvar captureAllH5pContentTypes = '1';\nvar h5pContentTypes = [''];\n&lt;/script&gt;\n\n&lt;link rel='stylesheet' id='h5p-core-styles-h5p-css'  href='https://example.org/wp-content/plugins/h5p/h5p-php-library/styles/h5p.css' media='all' /&gt;\n&lt;link rel='stylesheet' id='h5p-core-styles-h5p-confirmation-dialog-css'  href='https://example.org/wp-content/plugins/h5p/h5p-php-library/styles/h5p-confirmation-dialog.css' media='all' /&gt;\n&lt;link rel='stylesheet' id='h5p-core-styles-h5p-core-button-css'  href='https://example.org/wp-content/plugins/h5p/h5p-php-library/styles/h5p-core-button.css' media='all' /&gt;\n\n&lt;script src='https://example.org/wp-includes/js/wp-embed.min.js'&gt;&lt;/script&gt;\n\n&lt;!--\n&lt;script src='https://example.org/wp-includes/js/jquery/jquery.js?ver=1.12.4-wp'&gt;&lt;/script&gt;\n&lt;script src='https://example.org/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.4.1'&gt;&lt;/script&gt;\n--&gt;\n\n&lt;!--\n&lt;script src='https://example.org/wp-content/plugins/h5pxapikatchu/js/h5pxapikatchu-variables.js'&gt;&lt;/script&gt;\n--&gt;\n&lt;script src='https://example.org/wp-content/plugins/h5p/h5p-php-library/js/jquery.js'&gt;&lt;/script&gt;\n&lt;script src='https://example.org/wp-content/plugins/h5p/h5p-php-library/js/h5p.js'&gt;&lt;/script&gt;\n&lt;script src='https://example.org/wp-content/plugins/h5p/h5p-php-library/js/h5p-event-dispatcher.js'&gt;&lt;/script&gt;\n&lt;script src='https://example.org/wp-content/plugins/h5p/h5p-php-library/js/h5p-x-api-event.js'&gt;&lt;/script&gt;\n&lt;script src='https://example.org/wp-content/plugins/h5p/h5p-php-library/js/h5p-x-api.js'&gt;&lt;/script&gt;\n&lt;script src='https://example.org/wp-content/plugins/h5p/h5p-php-library/js/h5p-content-type.js'&gt;&lt;/script&gt;\n&lt;script src='https://example.org/wp-content/plugins/h5p/h5p-php-library/js/h5p-confirmation-dialog.js'&gt;&lt;/script&gt;\n&lt;script src='https://example.org/wp-content/plugins/h5p/h5p-php-library/js/h5p-action-bar.js'&gt;&lt;/script&gt;\n&lt;script src='https://example.org/wp-content/plugins/h5p/h5p-php-library/js/request-queue.js'&gt;&lt;/script&gt;\n\n\n&lt;!-- Content from header0.html --&gt;"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/readLines.html" class="external-link">readLines</a></span><span class="op">(</span><span class="st">'style.css'</span><span class="op">)</span>, sep <span class="op">=</span> <span class="st">"\n"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> .institution1, .institution2 {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   display: none;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> .noinstitution {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   display: block;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> .course1, .course2, .course3 {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   display: none;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> .nocourse {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   display: block;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> summary {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   background:  #f5f5f5;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   border: 1px solid #ccc;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> .shiny-img {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   filter: brightness(80%);</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> /* Content from style0.css */</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/readLines.html" class="external-link">readLines</a></span><span class="op">(</span><span class="st">'header.html'</span><span class="op">)</span>, sep <span class="op">=</span> <span class="st">"\n"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;script&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> function getParameterByName(name, url) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   name = name.replace(/[\[\]]/g,"\\$&amp;");</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   // Try to get the value from local storage</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   if (window.localStorage) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     return localStorage.getItem(name);</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   } else {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     return '';</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> // Collect parameters and store their values (as passed by Moodle/Wordpress)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> var login       = getParameterByName('login');</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> var email       = getParameterByName('email');</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> var displayname = getParameterByName('displayname');</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> var firstname   = getParameterByName('firstname');</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> var lastname    = getParameterByName('lastname');</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> var iemail      = getParameterByName('iemail');</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> var iid         = getParameterByName('iid');</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> var ifirstname  = getParameterByName('ifirstname');</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> var ilastname   = getParameterByName('ilastname');</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> var institution = getParameterByName('institution');</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> var icourse     = getParameterByName('icourse');</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> var ictitle     = getParameterByName('ictitle');</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> var iurl        = getParameterByName('iurl');</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> var iref        = getParameterByName('iref');</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> let institutions = ['institution1', 'institution2', 'noinstitution'];</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> let courses = ['course1', 'course2', 'course3', 'nocourse'];</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> function toggleDisplay(item, target) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   var style = item == target ? 'block' : 'none';</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   var elems = document.getElementsByClassName(item);</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   for (i = 0; i &lt; elems.length; i++) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     var elem = elems[i];</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     elem.style.display = style;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> function toggleInstitution(name) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   // Disable all institutions except that one</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   // Since they are already all hidden, just reenable it and hide noinstitution</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   toggleDisplay('noinstitution', name);</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   toggleDisplay(name, name);</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> function toggleCourse(name) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   // Disable all courses except that one</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   // Since they are already all hidden, just reenable it and hide nocourse</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   toggleDisplay('nocourse', name);</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   toggleDisplay(name, name);</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> function processParameters() {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   // Content related to an institution</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   if (institution !== null) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     toggleInstitution(institution);</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   // Content relative to a course</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   if (icourse !== null) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     toggleCourse(icourse);</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   // Process other parameters too here...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   // ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> function hideCode() {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   //var codes = document.querySelectorAll('pre:not([class])');</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   var codes = document.getElementsByClassName('hidden-code');</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   var code, i, d, s, p;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   for (i = 0; i &lt; codes.length; i++) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     // We want to place the parent div into details instead</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     code = codes[i].parentNode;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     p = code.parentNode;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     d = document.createElement('details');</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     s = document.createElement('summary');</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     s.innerText = 'See code';</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     //&lt;details&gt;&lt;summary&gt;hide.code.msg&lt;/summary&gt;&lt;/details&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     d.appendChild(s);</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     // move the code into &lt;details&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     p.replaceChild(d, code);</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     d.appendChild(code);</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> function retargetLinks() {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   // If displayed in an iframe, open external links into parent</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   // Adapted from Yihui Xie blog</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   var links = document.getElementsByTagName('a');</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   for (var i = 0; i &lt; links.length; i++) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     if (/^(https?:)?\/\//.test(links[i].getAttribute('href')) &amp;&amp;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       (links[i].target == null || links[i].target == '')) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       links[i].target = '_parent';</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> };</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> window.onload = function() {processParameters(); hideCode(); retargetLinks();};</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> function encodeQueryParam(name, first = false) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   var value = localStorage.getItem(name);</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   if (value === null || value == '') return '';</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   var sep = first ? '' : '&amp;';</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   return sep + encodeURIComponent(name) + '=' + encodeURIComponent(value);</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> function encodeQueryString() {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   // We got data from localStorage. So, if no data, no query string!</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   if (!window.localStorage) return('');</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   query = encodeQueryParam('login', true);</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   query += encodeQueryParam('email') + encodeQueryParam('displayname');</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   query += encodeQueryParam('firstname') + encodeQueryParam('lastname');</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   query += encodeQueryParam('iemail') + encodeQueryParam('iid');</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   query += encodeQueryParam('ifirstname') + encodeQueryParam('ilastname');</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   query += encodeQueryParam('institution');</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   query += encodeQueryParam('icourse') + encodeQueryParam('ictitle');</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   query += encodeQueryParam('iurl') + encodeQueryParam('iref');</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   // Detect if we have the Sepia or Night theme</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   // TODO: refine this because it is *always* detected</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   //if (document.getElementsByClassName('color-theme-1')) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   //  if (query == '') {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   //    query = 'theme=Sepia';</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   //  } else {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   //    query += '&amp;theme=Sepia';</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   //  }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   //}</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   //if (document.getElementsByClassName('color-theme-22')) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   //  if (query == '') {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   //    query = 'theme=Night';</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   //  } else {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   //    query += '&amp;theme=Night';</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   //  }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   //}</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   return query;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> //var params = window.location.toString().split('?')[1];</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> var params = encodeQueryString();</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> if (params !== undefined &amp;&amp; params != '') {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   var apps = document.getElementsByClassName('app');</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   for (i = 0; i &lt; apps.length; i++) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     var appitem = apps[i];</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     appitem.src = appitem.src + '?' + params;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   //var h5ps = document.getElementsByClassName('h5p');</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   //for (i = 0; i &lt; h5ps.length; i++) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   //  var h5pitem = h5ps[i];</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   //  h5pitem.src = h5pitem.src + '&amp;' + params;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   //}</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> // We have to add an authorization key to the header for the Shiny app</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> //... but those two trials do not work!</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> //async function getApp(src) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> //  const res = await fetch(src, {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> //    method: 'GET',</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> //    headers: {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> //      'Authorization': 'Key &lt;connect_api_key&gt;',</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> //    }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> //  });</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> //  const blob = await res.blob();</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> //  const urlObject = URL.createObjectURL(blob);</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> //  //document.querySelector('iframe').setAttribute('src', urlObject)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> //  return urlObject;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> //}</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> // or:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> //loadIframe = function(src, token, app) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> //    let xhr = new XMLHttpRequest();</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> //</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> //    function handler() {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> //      if (this.readyState === this.DONE) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> //        if (this.status === 200) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> //          console.log(this);</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> //          //document.querySelector(`#${frameId}`).src = "data:text/html;charset=utf-8," + encodeURIComponent(this.responseText);</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> //          //app.src = "data:text/html;charset=utf-8," + encodeURIComponent(this.responseText);</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> //          //app.src = URL.createObjectURL(this.response);</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> //        } else {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> //          //console.error('not loaded');</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> //        }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> //      }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> //    }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> //</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> //    xhr.open('GET', src);</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> //    xhr.onreadystatechange = handler;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> //    xhr.responseType = 'blob';</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> //    xhr.withCredentials = true;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> //    xhr.setRequestHeader('Authorization', 'Key ' + token);</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> //    xhr.send();</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> //  }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> launchApp = function(id, src) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   // This is now required by Posit Connect for embedding content</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   var address = window.location.toString().split('?')[0];</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   if (src.includes('?')) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     // There is already a search string =&gt; append parameters to it</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     src = src + '&amp;' + 'framesource=' + encodeURIComponent(address);</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   } else {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     // Add a search string</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     src = src + '?' + 'framesource=' + encodeURIComponent(address);</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   var params = encodeQueryString();</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   if (params !== undefined &amp;&amp; params != '') {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     src = src + '&amp;' + params;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   var img = document.getElementById('img' + id);</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   var app = document.getElementById(id);</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   //app.src = getApp(src);</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   //loadIframe(src, '&lt;connect_api_key&gt;', app);</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   app.src = src;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   app.style.display='block';</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   img.style.display='none';</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> var H5PIntegration = parent.H5PIntegration;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> var wpAJAXurl = 'https:\/\/example.org\/wp-admin\/admin-ajax.php';</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> var debugEnabled = '0';</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> var captureAllH5pContentTypes = '1';</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> var h5pContentTypes = [''];</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;/script&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;link rel='stylesheet' id='h5p-core-styles-h5p-css'  href='https://example.org/wp-content/plugins/h5p/h5p-php-library/styles/h5p.css' media='all' /&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;link rel='stylesheet' id='h5p-core-styles-h5p-confirmation-dialog-css'  href='https://example.org/wp-content/plugins/h5p/h5p-php-library/styles/h5p-confirmation-dialog.css' media='all' /&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;link rel='stylesheet' id='h5p-core-styles-h5p-core-button-css'  href='https://example.org/wp-content/plugins/h5p/h5p-php-library/styles/h5p-core-button.css' media='all' /&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;script src='https://example.org/wp-includes/js/wp-embed.min.js'&gt;&lt;/script&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;!--</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;script src='https://example.org/wp-includes/js/jquery/jquery.js?ver=1.12.4-wp'&gt;&lt;/script&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;script src='https://example.org/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.4.1'&gt;&lt;/script&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> --&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;!--</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;script src='https://example.org/wp-content/plugins/h5pxapikatchu/js/h5pxapikatchu-variables.js'&gt;&lt;/script&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> --&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;script src='https://example.org/wp-content/plugins/h5p/h5p-php-library/js/jquery.js'&gt;&lt;/script&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;script src='https://example.org/wp-content/plugins/h5p/h5p-php-library/js/h5p.js'&gt;&lt;/script&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;script src='https://example.org/wp-content/plugins/h5p/h5p-php-library/js/h5p-event-dispatcher.js'&gt;&lt;/script&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;script src='https://example.org/wp-content/plugins/h5p/h5p-php-library/js/h5p-x-api-event.js'&gt;&lt;/script&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;script src='https://example.org/wp-content/plugins/h5p/h5p-php-library/js/h5p-x-api.js'&gt;&lt;/script&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;script src='https://example.org/wp-content/plugins/h5p/h5p-php-library/js/h5p-content-type.js'&gt;&lt;/script&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;script src='https://example.org/wp-content/plugins/h5p/h5p-php-library/js/h5p-confirmation-dialog.js'&gt;&lt;/script&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;script src='https://example.org/wp-content/plugins/h5p/h5p-php-library/js/h5p-action-bar.js'&gt;&lt;/script&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;script src='https://example.org/wp-content/plugins/h5p/h5p-php-library/js/request-queue.js'&gt;&lt;/script&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;!-- Content from header0.html --&gt;</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">setwd</a></span><span class="op">(</span><span class="st">".."</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/unlink.html" class="external-link">unlink</a></span><span class="op">(</span><span class="st">"temp"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">setwd</a></span><span class="op">(</span><span class="va">odir</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/rm.html" class="external-link">rm</a></span><span class="op">(</span><span class="va">odir</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by <a href="https://phgrosjean.sciviews.org" class="external-link">Philippe Grosjean</a>.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

      </footer></div>






  </body></html>

